<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#000000" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Backstage Pass</title>
  <meta property="og:image" content="https://backstagepass.co.in/newlogo.webp" />
  <meta property="og:type" content="website">

  <!-- ===== Fonts Optimization ===== -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" media="print"
    onload="this.media='all'" />
  <noscript>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" />
  </noscript>

  <!-- ===== Preload LCP Hero Images ===== -->
  <link rel="preload" as="image" href="/img/banners/NewCampus.webp" fetchpriority="high" />
  <link rel="preload" as="image" href="/img/mobilebanner/homepagebanner/NewCampus.webp" media="(max-width:768px)"
    fetchpriority="high" />

  <!-- ===== Inline Critical CSS for Hero Banner ===== -->
  <style>
    .hero-banner {
      width: 100%;
      max-width: 1600px;
      height: auto;
      display: block;
      margin: 0 auto;
      overflow: hidden;
    }

    body {
      margin: 0;
      font-family: 'Montserrat', sans-serif;
    }
  </style>

  <!-- ===== Deferred Analytics Scripts ===== -->
  <script>
    // GTM deferred
    window.addEventListener('load', () => {
      (function (w, d, s, l, i) {
        w[l] = w[l] || []; w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : '';
        j.async = true; j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, 'script', 'dataLayer', 'GTM-P8SQ3BS');
    });

    // Microsoft Clarity deferred
    if ('requestIdleCallback' in window) {
      requestIdleCallback(() => {
        (function (c, l, a, r, i, t, y) {
          c[a] = c[a] || function () { (c[a].q = c[a].q || []).push(arguments) };
          t = l.createElement(r); t.async = 1; t.src = "https://www.clarity.ms/tag/" + i;
          y = l.getElementsByTagName(r)[0]; y.parentNode.insertBefore(t, y);
        })(window, document, "clarity", "script", "mo8baddgve");
      });
    }

    // Facebook Pixel deferred
    window.fbq = function () {
      window.fbq.callMethod ? window.fbq.callMethod.apply(window.fbq, arguments) : window.fbq.queue.push(arguments);
    };
    window.fbq.push = window.fbq;
    window.fbq.loaded = true;
    window.fbq.version = '2.0';
    window.fbq.queue = [];
    window.addEventListener('load', () => {
      const fb = document.createElement('script');
      fb.async = true;
      fb.src = 'https://connect.facebook.net/en_US/fbevents.js';
      fb.onload = () => { fbq('init', '8236983926348899'); fbq('track', 'PageView'); };
      document.head.appendChild(fb);
    });

    // Matomo deferred
    window.addEventListener('load', () => {
      setTimeout(() => {
        var _mtm = window._mtm = window._mtm || [];
        _mtm.push({ 'mtm.startTime': Date.now(), 'event': 'mtm.Start' });

        var d = document, g = d.createElement('script'), s = d.getElementsByTagName('script')[0];
        g.async = true;
        g.src = 'https://cdn.matomo.cloud/backstagepass.matomo.cloud/container_Fa2LaVPH.js';
        s.parentNode.insertBefore(g, s);
      }, 3000);
    });
  </script>
  <noscript>
    <img height="1" width="1" style="display:none"
      src="https://www.facebook.com/tr?id=8236983926348899&ev=PageView&noscript=1" />
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P8SQ3BS" height="0" width="0"
      style="display:none;visibility:hidden"></iframe>
  </noscript>

</head>

<body>

  <!-- React Root -->
  <div id="root"></div>

  <!-- ===== React Chunk Cache Cleanup ===== -->
  <script>
    let cacheCleaned = false;
    const cleanCache = async () => {
      if (cacheCleaned) return;
      cacheCleaned = true;
      try {
        const currentChunks = Array.from(document.querySelectorAll('script[src*=".chunk."]'))
          .map(s => s.src.split('/').pop())
          .sort()
          .join(',');
        const previousChunks = localStorage.getItem('react_build_chunks');
        if (previousChunks && previousChunks !== currentChunks) {
          if ('caches' in window) {
            const cacheNames = await caches.keys();
            await Promise.all(cacheNames.map(name => caches.delete(name)));
          }
          localStorage.clear();
          sessionStorage.clear();
          location.reload();
        }
        localStorage.setItem('react_build_chunks', currentChunks);
      } catch (e) { console.error(e); }
    };
    window.addEventListener('click', cleanCache, { once: true });
  </script>
</body>

</html>